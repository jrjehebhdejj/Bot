import telebot
import time
import threading
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton

# ุจูุงูุงุช ุงูุจูุช
TOKEN = "7578353579:AAG9_vIkC19Idepm-nMqf1-9IMcA1ni_bAE"
GROUP_ID = "-1002207678151"  # ุชุฃูุฏ ูู ุฃู ุงูุฌุฑูุจ ุณูุจุฑ ุฌุฑูุจ

# ุฅูุดุงุก ุงูุจูุช
bot = telebot.TeleBot(TOKEN)

# ุงูุฑุณุงูุฉ ุงูุชู ุณูุชู ุฅุฑุณุงููุง ููุฌุฑูุจ
MESSAGE_TEXT = """๐ข *ุชู ูุชุญ ุจุงุจ ุงูุฅูุฏุงุน ุงูุขู!* ๐ข

๐ ุงุณุชุซูุฑ ูู *ุงูููุฑูุณ ูุงูุนููุงุช ุงูุฑูููุฉ* ูุน *ุงูุฃุณุชุงุฐ ุฃุญูุฏ ูุฑุฌ ุฑูุถุงู ุงูููุจู* ๐ฐ  
๐ก *ูุฑุตุฉ ุงุณุชุซูุงุฑูุฉ ูุถูููุฉ* ูุชุญููู ุฃุฑุจุงุญ ูููุฒุฉ! โ  

๐น ุงุณุชูุฏ ูู ุฎุจุฑุชูุง ูู ุงูุณูู  
๐น ุฅุฏุงุฑุฉ ุฃููุงูู ุจุฃูุงู ูุงุญุชุฑุงููุฉ  
๐น ุชุญููู ุนูุงุฆุฏ ูุณุชุฏุงูุฉ  

โฌ๏ธ ููุงุดุชุฑุงู ูุงูุงุณุชุซูุงุฑ ุงุถุบุท ุนูู ุงูุฒุฑ ุฃุฏูุงู โฌ๏ธ"""

# ุงูุฑุณุงูุฉ ุงูุชููุงุฆูุฉ ุนูุฏ ุงุณุชูุจุงู ุฑุณุงูุฉ ูู ุงูุฎุงุต
AUTO_REPLY_TEXT = """๐ฏ *ูู ุชุจุญุซ ุนู ุงุณุชุซูุงุฑ ูุถููู ูุขููุ* ๐ฏ  

๐ ุงุณุชุซูุฑ ูู *ุงูููุฑูุณ ูุงูุนููุงุช ุงูุฑูููุฉ* ูุนูุง ูุญูู ุฃุฑุจุงุญูุง ูููุฒุฉ!  

๐ฐ *ููุงุฐุง ุชุฎุชุงุฑูุงุ*  
โ ุฃุฑุจุงุญ ุซุงุจุชุฉ ููุถูููุฉ  
โ ุฅุฏุงุฑุฉ ูุญุชุฑูุฉ ููุฃููุงู  
โ ูุณุจุฉ ุงููุฎุงุทุฑ ูุนุฏููุฉ  

โฌ๏ธ ุงุถุบุท ููุงุดุชุฑุงู ูุงูุงุณุชุซูุงุฑ โฌ๏ธ"""

# ูุชุบูุฑ ูุชุฎุฒูู ID ุขุฎุฑ ุฑุณุงูุฉ ูุฑุณูุฉ ูู ุงูุฌุฑูุจ
last_message_id = None

# ุฅูุดุงุก ููุญุฉ ุงูุฃุฒุฑุงุฑ
def get_keyboard():
    markup = InlineKeyboardMarkup()
    markup.add(InlineKeyboardButton("๐ต ููุงุดุชุฑุงู ูุงูุงุณุชุซูุงุฑ ุงุถุบุท ููุง", url="https://t.me/AHMED1_1FARAG"))
    markup.add(InlineKeyboardButton("๐ ููุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ ุงุถุบุท ููุง", url="https://wa.me/message/DECYCNVGV2OEP1"))
    return markup

# ูุธููุฉ ุฅุฑุณุงู ุงูุฑุณุงูุฉ ููุฌุฑูุจ ูู 10 ุฏูุงุฆู ูุน ุญุฐู ุงูุฑุณุงูุฉ ุงููุฏููุฉ
def send_message():
    global last_message_id
    while True:
        try:
            # ุญุฐู ุงูุฑุณุงูุฉ ุงููุฏููุฉ ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
            if last_message_id:
                try:
                    bot.delete_message(GROUP_ID, last_message_id)
                    print("๐๏ธ ุชู ุญุฐู ุงูุฑุณุงูุฉ ุงููุฏููุฉ ุจูุฌุงุญ.")
                except Exception as e:
                    print(f"โ๏ธ ูู ูุชููู ูู ุญุฐู ุงูุฑุณุงูุฉ ุงููุฏููุฉ: {e}")

            # ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงูุฌุฏูุฏุฉ
            msg = bot.send_message(GROUP_ID, MESSAGE_TEXT, parse_mode="Markdown", reply_markup=get_keyboard())
            last_message_id = msg.message_id  # ุชุฎุฒูู ID ุงูุฑุณุงูุฉ ุงูุฌุฏูุฏุฉ
            
            print(f"โ ุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงูุฌุฏูุฏุฉ (ID: {last_message_id})")

            time.sleep(600)  # 10 ุฏูุงุฆู = 600 ุซุงููุฉ
        except Exception as e:
            print(f"โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุฑุณุงูุฉ ููุฌุฑูุจ: {e}")
            time.sleep(60)  # ุงูุชุธุงุฑ ุฏูููุฉ ูุจู ุงููุญุงููุฉ ูุฌุฏุฏูุง

# ุงูุฑุฏ ุงูุชููุงุฆู ุนูุฏ ุงุณุชูุจุงู ุฑุณุงูุฉ ูู ุงูุฎุงุต
@bot.message_handler(func=lambda message: message.chat.type == "private", content_types=['text'])
def auto_reply(message):
    try:
        bot.send_message(message.chat.id, AUTO_REPLY_TEXT, parse_mode="Markdown", reply_markup=get_keyboard())
        print(f"โ ุชู ุงูุฑุฏ ุชููุงุฆููุง ุนูู ุงููุณุชุฎุฏู {message.chat.id}")
    except Exception as e:
        print(f"โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุฑุฏ ุงูุชููุงุฆู: {e}")

# ุชุดุบูู ุงููุธุงุฆู ูู ููุณ ุงูููุช
if __name__ == "__main__":
    threading.Thread(target=send_message, daemon=True).start()
    print("โ ุงูุจูุช ูุนูู ุงูุขู ุจูุฌุงุญ!")

    while True:
        try:
            print("๐ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช...")
            bot.infinity_polling(timeout=10, long_polling_timeout=5)
        except Exception as e:
            print(f"โ๏ธ ุฎุทุฃ ูู ุงูุงุชุตุงูุ ุณูุชู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุฎูุงู 5 ุซูุงูู: {e}")
            time.sleep(5)  # ุงูุชุธุงุฑ 5 ุซูุงูู ูุจู ุฅุนุงุฏุฉ ุงููุญุงููุฉ